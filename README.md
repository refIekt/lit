# Lit CLI

<p align="center">
  <a href="https://www.mozilla.org/MPL/2.0/" alt="MPLv2 License">
    <img src="https://img.shields.io/badge/license-MPLv2-blue.svg" />
  </a>
  <a href="https://rubygems.org/gems/lit-cli">
    <img src="https://badge.fury.io/rb/lit-cli.svg" alt="Gem Version" />
  </a>
</p>

*Shine a light on terminal commands.* ðŸ”¥

Lit lets you view metadata generated by [Reflekt](https://reflekt.dev) (and others) as a process runs.

## Usage

Simply start any command with `lit`. For example `rails server` becomes:
```
lit rails server
```

A script like `ruby script.rb` becomes:
```
lit ruby script.rb
```

## Installation

Applications using the Lit API should install the `lit` command for you. To install it manually run:
```
gem install lit-cli
```

## Flags

Lit accepts flags to modify behaviour. They are prefixed with an `@` and added directly after the `lit` command:
```
lit @flag ruby script.rb --verbose
```

Lit flags start with an `@` instead of a `--` so that they aren't confused with flags for the command Lit is firing off.

### Step

Step through the code. The terminal will stop at each `lit` message, then prompt you to press *Enter* to continue to the next.
```
lit @step ruby script.rb
```

### State

Filter logs by status:
```
lit @state=error ruby script.rb
```

### Delay

Delay the execution of a program to make logs easier to read. The default delay is `0` seconds (no delay) but could be 1 second, for example:
```
lit @delay=1 ruby script.rb
```

## API

Instructions for integrating your application with Lit.

### Usage

At the top of your file add:
```ruby
require 'lit_cli'
include LitCLI
```

Then use the `lit()` method:
```ruby
lit "message"
```

#### Code as comments

You can use the `lit()` method in place of comments to help document your code. This:
```ruby
# Create control for method.
control = Control.new(action, 0, @@reflekt.aggregator)
action.control = control
```

Becomes this:
```ruby
lit "Create control for #{method} method"
control = Control.new(action, 0, @@reflekt.aggregator)
action.control = control
```

Now you've commented your code and your comments double as logs.

You can even use the emoji `ðŸ”¥()` instead of `lit()` to call the method... cause why not? Climate change is real and we're all going to die anyway. So the final code could be:

```ruby
ðŸ”¥ "Create control for #{method} method"
control = Control.new(action, 0, @@reflekt.aggregator)
action.control = control
```

The lit emoji acts as a nice sectional heading too. These are all just ideas and it's up to you to decide how to write code and save the future of humanity.

### Installation

In Gemfile add:
```ruby
gem 'lit-cli'
```  

In terminal run:
```
bundle install
```

Or:
```
gem install lit-cli
```
